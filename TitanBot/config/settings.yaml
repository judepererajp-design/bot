# ==========================================
# TITAN-X INSTITUTIONAL CONFIGURATION
# Optimized for: Manual Trading Assistant
# ==========================================

system:
  log_level: INFO       # DEBUG for verbose, INFO for production
  cpu_workers: 4        # Threads for math
  min_confidence: 65.0  # OPTIMIZED: Lowered from 70 to catch more setups
  gemini_api_key: ""    # Optional: LLM Sentiment

exchange:
  name: binance
  api_key: null     # Loaded from ENV
  api_secret: null  # Loaded from ENV
  testnet: false
  options:
    defaultType: spot

telegram:
  bot_token: "YOUR_TOKEN"  # Loaded from ENV
  chat_id: "YOUR_ID"       # Loaded from ENV
  message_mode: detailed   # detailed | compact

scanning:
  max_tickers: 3350
  min_volume: 1000000     # $1M 24h volume (Avoids dead coins)
  quote_currency: USDT

# --- NEW: STALKER ENGINE ---
stalker:
  enabled: false
  min_score: 80
  rescan_interval: 300     # 5 minutes
  max_watchlist_size: 20
  detection:
    coiling: true          # Volatility Squeeze
    key_levels: true       # 20-period High/Low tests
    volume: true           # 3x Volume Spikes

# --- PATTERNS SECTION (MISSING - ADD THIS) ---
patterns:
  # Geometric (Flags, Triangles)
  geometric:
    lookback: 50
    pivot_order: 3         # More sensitive (was 5)
    slope_tolerance: 0.08
    detect_flags: true
    detect_triangles: true
    detect_double_top_bottom: true
    detect_head_shoulders: true
  
  # Harmonics (Gartley, Bat)
  harmonics:
    enabled: true
    tolerance: 0.15        # Looser tolerance (was 0.10)
    pivot_order: 5

# --- VOLUME PROFILE CONFIG ---
volume_profile:
  vwap_window: 24
  profile_bins: 100
  value_area_pct: 0.70
  adaptive_sd_multiplier: true
  min_samples_for_profile: 50
  volume_weighted_vwap: true

# --- RISK MANAGEMENT ---
risk:
  account_size: 1000       # Base unit for calculation
  risk_per_trade: 0.01     # 1% risk
  min_rr: 1.3              # OPTIMIZED: Lowered from 1.5
  max_rr: 5.0
  atr_period: 14
  atr_multiplier_sl: 1.5
  atr_multiplier_tp: 2.5
  use_kelly: true
  use_adaptive_stops: true
  max_position_size_pct: 0.1     # 10% max
  max_daily_loss_pct: 0.02       # 2% daily max
  correlation_adjustment: true

# --- FILTER WEIGHTS (DECISION ENGINE) ---
# Sum must = 1.0
weights:
  technical: 0.40    # Highest: Strategy Confidence
  volume: 0.20       # High: VWAP/POC Context
  orderflow: 0.15    # Med: Tape Reading
  correlation: 0.10  # Low: Beta
  sentiment: 0.05    # Lowest: AI/News
  derivatives: 0.10  # Low: Funding Rates

# --- DATABASE ---
database:
  path: data/titan.db